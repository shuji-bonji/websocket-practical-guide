<script lang="ts">
	import { progressStore } from '$lib/stores/progress';

	let progress = $derived($progressStore);
	let phase2Progress = $derived(progress.phases[1]);

	// Phase 2 è©³ç´°ãƒ‡ãƒ¼ã‚¿
	const phase2Data = {
		phase: 2,
		title: 'å®Ÿè£…æŠ€è¡“',
		duration: '20-23æ™‚é–“',
		description:
			'ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§WebSocketãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®è©³ç´°ã‚’å­¦ç¿’ã—ã€ãƒ•ãƒ¬ãƒ¼ãƒ æ§‹é€ ãƒ»ã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å®Ÿè£…ã‚’ç†è§£ã™ã‚‹',
		learningGoals: [
			'WebSocketãƒ•ãƒ¬ãƒ¼ãƒ æ§‹é€ ã¨ãƒã‚¤ãƒŠãƒªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’è©³ç´°ã«ç†è§£ã™ã‚‹',
			'GraphQL-WSã€MQTT over WebSocketãªã©ã®ã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®Ÿè£…ã§ãã‚‹',
			'Dockerç’°å¢ƒã§ã®WebSocketã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰ãƒ»ç®¡ç†ãŒã§ãã‚‹',
			'ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ¬ãƒ™ãƒ«ã§ã®ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒã§ãã‚‹',
			'WebSocketã®æ‹¡å¼µæ©Ÿèƒ½ã¨ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’è¨­è¨ˆã§ãã‚‹'
		],
		prerequisites: [
			'Phase 1ã®å®Œäº†ï¼ˆWebSocketåŸºç¤çŸ¥è­˜ï¼‰',
			'Node.js/npm ã®åŸºæœ¬æ“ä½œ',
			'Docker/Docker Compose ã®åŸºæœ¬ç†è§£',
			'ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã¨ãƒ•ãƒ¬ãƒ¼ãƒŸãƒ³ã‚°ã®æ¦‚å¿µ',
			'GraphQL ã‚„ MQTT ã®åŸºç¤çŸ¥è­˜'
		]
	};

	// ã‚»ã‚¯ã‚·ãƒ§ãƒ³è©³ç´°ãƒ‡ãƒ¼ã‚¿
	const sections = [
		{
			id: 1,
			title: 'ãƒ‡ãƒ¼ã‚¿é€šä¿¡å®Ÿè£…',
			duration: '6-7æ™‚é–“',
			description: 'WebSocketãƒ‡ãƒ¼ã‚¿é€šä¿¡ã®å®Ÿè£…è©³ç´°ã¨Svelteã‚¹ãƒˆã‚¢é€£æºã‚’å­¦ç¿’',
			color: 'bg-blue-100 text-blue-800 border-blue-200',
			accentColor: 'bg-blue-600',
			lessons: [
				{
					id: 'phase2-data-communication-svelte-stores',
					title: 'WebSocketã¨Svelteã‚¹ãƒˆã‚¢ã®é€£æº',
					duration: '2æ™‚é–“',
					description: 'Svelteã®åå¿œæ€§ã¨WebSocketã‚’çµ±åˆã—ãŸã‚¹ãƒˆã‚¢è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³',
					topics: [
						'Svelte 5 Runes ã§ã® WebSocket ã‚¹ãƒˆã‚¢è¨­è¨ˆ',
						'ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªæ¥ç¶šçŠ¶æ…‹ç®¡ç†',
						'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã¨ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°',
						'ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½'
					],
					exercises: [
						'åŸºæœ¬çš„ãªWebSocketã‚¹ãƒˆã‚¢ã®å®Ÿè£…',
						'æ¥ç¶šçŠ¶æ…‹ã®å¯è¦–åŒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ',
						'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ­ã‚°è¡¨ç¤ºæ©Ÿèƒ½ã®å®Ÿè£…'
					]
				},
				{
					id: 'phase2-data-communication-send-receive',
					title: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡ã¨ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãƒ†ã‚£',
					duration: '2æ™‚é–“',
					description: 'TypeScriptã‚’æ´»ç”¨ã—ãŸã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°',
					topics: [
						'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹å®šç¾©ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³',
						'ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³',
						'ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†',
						'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³'
					],
					exercises: [
						'å‹å®‰å…¨ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ',
						'JSONã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…',
						'ãƒã‚¤ãƒŠãƒªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰'
					]
				},
				{
					id: 'phase2-data-communication-error-handling',
					title: 'ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨å“è³ªä¿è¨¼',
					duration: '2-3æ™‚é–“',
					description: 'å …ç‰¢ãªWebSocketã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†',
					topics: [
						'æ¥ç¶šã‚¨ãƒ©ãƒ¼ã®åˆ†é¡ã¨å¯¾å‡¦æ³•',
						'è‡ªå‹•å†æ¥ç¶šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ',
						'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤',
						'å“è³ªç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½'
					],
					exercises: [
						'æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•å†æ¥ç¶šã®å®Ÿè£…',
						'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚­ãƒ¥ãƒ¼ã¨ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•',
						'æ¥ç¶šå“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†'
					]
				}
			]
		},
		{
			id: 2,
			title: 'ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ»ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…',
			duration: '8-9æ™‚é–“',
			description: 'WebSocketãƒ•ãƒ¬ãƒ¼ãƒ æ§‹é€ ã¨ã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®è©³ç´°å®Ÿè£…',
			color: 'bg-purple-100 text-purple-800 border-purple-200',
			accentColor: 'bg-purple-600',
			lessons: [
				{
					id: 'phase2-frames-protocols-frame-structure',
					title: 'WebSocketãƒ•ãƒ¬ãƒ¼ãƒ æ§‹é€ ã®è©³ç´°è§£æ',
					duration: '2æ™‚é–“',
					description: 'RFC 6455ãƒ•ãƒ¬ãƒ¼ãƒ ä»•æ§˜ã®å®Œå…¨ç†è§£ã¨ãƒã‚¤ãƒŠãƒªè§£æ',
					topics: [
						'ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã®æ§‹é€ ï¼ˆFIN, RSV, Opcode, MASK, Payload lengthï¼‰',
						'ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã¨ãƒã‚¹ã‚­ãƒ³ã‚°',
						'åˆ¶å¾¡ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆPing, Pong, Closeï¼‰',
						'ãƒ•ãƒ¬ãƒ¼ãƒ åˆ†å‰²ã¨å†æ§‹ç¯‰'
					],
					exercises: [
						'ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ‘ãƒ¼ã‚µãƒ¼ã®å®Ÿè£…',
						'ãƒã‚¤ãƒŠãƒªãƒ•ãƒ¬ãƒ¼ãƒ å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ä½œæˆ',
						'åˆ¶å¾¡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…'
					]
				},
				{
					id: 'phase2-frames-protocols-binary-data',
					title: 'ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°',
					duration: '2æ™‚é–“',
					description: 'ãƒã‚¤ãƒŠãƒªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åŠ¹ç‡çš„ãªå‡¦ç†ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å®Ÿè£…',
					topics: [
						'ArrayBuffer ã¨ TypedArray ã®æ´»ç”¨',
						'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®åˆ†å‰²å‡¦ç†',
						'åœ§ç¸®ï¼ˆdeflate-frameï¼‰ã®å®Ÿè£…',
						'å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã®è»¢é€æœ€é©åŒ–'
					],
					exercises: [
						'ãƒã‚¤ãƒŠãƒªãƒãƒ£ãƒƒãƒˆå®Ÿè£…',
						'ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€æ©Ÿèƒ½ã®ä½œæˆ',
						'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã®å®Ÿè£…'
					]
				},
				{
					id: 'phase2-frames-protocols-subprotocols',
					title: 'ã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨ãƒã‚´ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³',
					duration: '2æ™‚é–“',
					description: 'WebSocketã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®è¨­è¨ˆã¨å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³',
					topics: [
						'Sec-WebSocket-Protocol ãƒ˜ãƒƒãƒ€ãƒ¼',
						'ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒã‚´ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³',
						'ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®è¨­è¨ˆ',
						'ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°'
					],
					exercises: [
						'ç‹¬è‡ªã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®è¨­è¨ˆãƒ»å®Ÿè£…',
						'ãƒ—ãƒ­ãƒˆã‚³ãƒ«äº’æ›æ€§ãƒ†ã‚¹ãƒˆ',
						'ãƒãƒ«ãƒãƒ—ãƒ­ãƒˆã‚³ãƒ«å¯¾å¿œã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰'
					]
				},
				{
					id: 'phase2-frames-protocols-graphql-ws',
					title: 'GraphQL-WS ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…',
					duration: '1æ™‚é–“',
					description: 'GraphQL Subscriptions over WebSocket ã®å®Ÿè£…',
					topics: [
						'graphql-ws ã‚µãƒ–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä»•æ§˜',
						'Connection Init/Ack ãƒ•ãƒ­ãƒ¼',
						'Subscription ç®¡ç†ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«',
						'GraphQL ã‚¯ã‚¨ãƒªã®å‹•çš„å®Ÿè¡Œ'
					],
					exercises: [
						'GraphQL-WS ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…',
						'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¯ã‚¨ãƒªå®Ÿè¡Œ',
						'Subscription ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰'
					]
				},
				{
					id: 'phase2-frames-protocols-mqtt',
					title: 'MQTT over WebSocket å®Ÿè£…',
					duration: '1æ™‚é–“',
					description: 'IoTå‘ã‘MQTTãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®WebSocketå®Ÿè£…',
					topics: [
						'MQTT over WebSocket ä»•æ§˜',
						'Publish/Subscribe ãƒ‘ã‚¿ãƒ¼ãƒ³',
						'QoS ãƒ¬ãƒ™ãƒ«ã¨ä¿¡é ¼æ€§ä¿è¨¼',
						'IoT ãƒ‡ãƒã‚¤ã‚¹é€£æº'
					],
					exercises: [
						'MQTT ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ¥ç¶šå®Ÿè£…',
						'ãƒ‡ãƒã‚¤ã‚¹ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–',
						'IoT ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒæ§‹ç¯‰'
					]
				}
			]
		},
		{
			id: 3,
			title: 'é«˜åº¦ãªãƒˆãƒ”ãƒƒã‚¯ã‚¹',
			duration: '6-7æ™‚é–“',
			description: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€PWAçµ±åˆã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãªã©ã®å®Ÿç”¨çš„ãªãƒˆãƒ”ãƒƒã‚¯',
			color: 'bg-green-100 text-green-800 border-green-200',
			accentColor: 'bg-green-600',
			lessons: [
				{
					id: 'phase2-advanced-topics-security',
					title: 'WebSocketã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å®Ÿè£…',
					duration: '2-3æ™‚é–“',
					description: 'èªè¨¼ãƒ»èªå¯ãƒ»æš—å·åŒ–ãªã©ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–å®Ÿè£…',
					topics: [
						'JWT ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼ã®å®Ÿè£…',
						'Origin æ¤œè¨¼ã¨CSRFå¯¾ç­–',
						'ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¨DDoSå¯¾ç­–',
						'TLS/SSL è¨­å®šã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼'
					],
					exercises: [
						'èªè¨¼ä»˜ãWebSocketã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰',
						'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ”»æ’ƒã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
						'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã¨ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ'
					]
				},
				{
					id: 'phase2-advanced-topics-pwa-integration',
					title: 'PWAã¨ã®çµ±åˆå®Ÿè£…',
					duration: '2æ™‚é–“',
					description: 'Progressive Web Appã§ã®ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã¨Service Workeré€£æº',
					topics: [
						'Service Worker ã§ã®WebSocketç®¡ç†',
						'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°',
						'ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åŒæœŸ',
						'Push Notification é€£æº'
					],
					exercises: [
						'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒª',
						'Service Worker ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãƒãƒ–',
						'PWA WebSocket çµ±åˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª'
					]
				},
				{
					id: 'phase2-advanced-topics-scalability',
					title: 'ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨è² è·åˆ†æ•£',
					duration: '2æ™‚é–“',
					description: 'å¤§è¦æ¨¡WebSocketã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆã¨å®Ÿè£…',
					topics: [
						'Redis ã‚’ä½¿ã£ãŸæ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°',
						'ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã§ã® WebSocket å¯¾å¿œ',
						'ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã¨çŠ¶æ…‹å…±æœ‰',
						'ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã¨æœ€é©åŒ–'
					],
					exercises: [
						'Redis Pub/Sub å®Ÿè£…',
						'ãƒãƒ«ãƒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹è² è·åˆ†æ•£',
						'ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯'
					]
				}
			]
		}
	];

	// é€²æ—è¨ˆç®—
	function calculateProgress(section: { lessons: { id: string }[] }) {
		if (!phase2Progress) return 0;
		const completedLessons = section.lessons.filter((lesson) =>
			phase2Progress.lessons.some((l) => l.id === lesson.id && l.completed)
		).length;
		return Math.round((completedLessons / section.lessons.length) * 100);
	}

	function isLessonCompleted(lessonId: string) {
		return phase2Progress?.lessons.some((l) => l.id === lessonId && l.completed) || false;
	}

	function getSectionStatusColor(progress: number) {
		if (progress === 100) return 'bg-green-100 text-green-800';
		if (progress > 0) return 'bg-yellow-100 text-yellow-800';
		return 'bg-gray-100 text-gray-600';
	}
</script>

<svelte:head>
	<title>Phase 2: å®Ÿè£…æŠ€è¡“ | WebSocketå­¦ç¿’</title>
	<meta name="description" content="WebSocketã®å®Ÿè£…æŠ€è¡“ã¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«è©³ç´°ã‚’å­¦ç¿’ã™ã‚‹Phase 2" />
</svelte:head>

<div class="max-w-6xl mx-auto py-8 px-4">
	<!-- Phase Header -->
	<div class="mb-8">
		<nav class="text-sm text-gray-500 mb-4">
			<a href="/" class="hover:text-gray-700">ãƒ›ãƒ¼ãƒ </a>
			<span class="mx-2">â€º</span>
			<span class="text-gray-900">Phase 2: å®Ÿè£…æŠ€è¡“</span>
		</nav>

		<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-8">
			<div class="flex items-start justify-between mb-6">
				<div>
					<h1 class="text-3xl font-bold text-gray-900 mb-4">
						ğŸ”§ Phase {phase2Data.phase}: {phase2Data.title}
					</h1>
					<p class="text-lg text-gray-600 mb-4">{phase2Data.description}</p>
					<div class="flex items-center space-x-4 text-sm text-gray-500">
						<div class="flex items-center">
							<svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
								<path
									fill-rule="evenodd"
									d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 9.586V6z"
									clip-rule="evenodd"
								/>
							</svg>
							{phase2Data.duration}
						</div>
						<div class="flex items-center">
							<svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
								<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							{phase2Progress?.lessons.filter((l) => l.completed).length || 0} / {sections.reduce(
								(total, section) => total + section.lessons.length,
								0
							)} ãƒ¬ãƒƒã‚¹ãƒ³å®Œäº†
						</div>
					</div>
				</div>
				<div class="flex-shrink-0">
					<div
						class="w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-bold"
					>
						{phase2Data.phase}
					</div>
				</div>
			</div>

			<!-- é€²æ—ãƒãƒ¼ -->
			<div class="mb-6">
				<div class="flex justify-between text-sm text-gray-600 mb-2">
					<span>å…¨ä½“é€²æ—</span>
					<span
						>{Math.round(
							((phase2Progress?.lessons.filter((l) => l.completed).length || 0) /
								sections.reduce((total, section) => total + section.lessons.length, 0)) *
								100
						)}%</span
					>
				</div>
				<div class="w-full bg-gray-200 rounded-full h-2">
					<div
						class="bg-blue-600 h-2 rounded-full transition-all duration-300"
						style="width: {Math.round(
							((phase2Progress?.lessons.filter((l) => l.completed).length || 0) /
								sections.reduce((total, section) => total + section.lessons.length, 0)) *
								100
						)}%"
					></div>
				</div>
			</div>

			<!-- å­¦ç¿’ç›®æ¨™ -->
			<div class="grid md:grid-cols-2 gap-8">
				<div>
					<h3 class="text-lg font-semibold text-gray-900 mb-3">ğŸ¯ å­¦ç¿’ç›®æ¨™</h3>
					<ul class="space-y-2">
						{#each phase2Data.learningGoals as goal (goal)}
							<li class="flex items-start">
								<svg
									class="w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"
									fill="currentColor"
									viewBox="0 0 20 20"
								>
									<path
										fill-rule="evenodd"
										d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
										clip-rule="evenodd"
									/>
								</svg>
								<span class="text-gray-700 text-sm">{goal}</span>
							</li>
						{/each}
					</ul>
				</div>

				<div>
					<h3 class="text-lg font-semibold text-gray-900 mb-3">ğŸ“‹ å‰ææ¡ä»¶</h3>
					<ul class="space-y-2">
						{#each phase2Data.prerequisites as prerequisite (prerequisite)}
							<li class="flex items-start">
								<svg
									class="w-5 h-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0"
									fill="currentColor"
									viewBox="0 0 20 20"
								>
									<path
										fill-rule="evenodd"
										d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
										clip-rule="evenodd"
									/>
								</svg>
								<span class="text-gray-600 text-sm">{prerequisite}</span>
							</li>
						{/each}
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!-- Sections -->
	<div class="space-y-8">
		{#each sections as section (section.id)}
			{@const sectionProgress = calculateProgress(section)}
			<div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
				<!-- Section Header -->
				<div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
					<div class="flex items-center justify-between">
						<div class="flex items-center space-x-4">
							<div
								class="w-8 h-8 {section.accentColor} rounded-full flex items-center justify-center text-white text-sm font-bold"
							>
								{section.id}
							</div>
							<div>
								<h2 class="text-xl font-semibold text-gray-900">{section.title}</h2>
								<p class="text-sm text-gray-600">{section.description}</p>
							</div>
						</div>
						<div class="flex items-center space-x-4">
							<span
								class="text-xs {getSectionStatusColor(
									sectionProgress
								)} px-2 py-1 rounded-full font-medium"
							>
								{sectionProgress}% å®Œäº†
							</span>
							<span class="text-sm text-gray-500">{section.duration}</span>
						</div>
					</div>

					<!-- Section Progress Bar -->
					<div class="mt-3">
						<div class="w-full bg-gray-200 rounded-full h-1.5">
							<div
								class="{section.accentColor} h-1.5 rounded-full transition-all duration-300"
								style="width: {sectionProgress}%"
							></div>
						</div>
					</div>
				</div>

				<!-- Lessons -->
				<div class="p-6">
					<div class="grid gap-4">
						{#each section.lessons as lesson, lessonIndex (lesson.id)}
							{@const isCompleted = isLessonCompleted(lesson.id)}
							{@const lessonUrl = `/phase2/${lesson.id.replace('phase2-', '').replace(/-/g, '/')}`}
							<a
								href={lessonUrl}
								class="block border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:bg-blue-50 transition-all group"
							>
								<div class="flex items-start justify-between">
									<div class="flex items-start space-x-3 flex-1">
										<div class="flex-shrink-0 mt-1">
											{#if isCompleted}
												<div
													class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"
												>
													<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
														<path
															fill-rule="evenodd"
															d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
															clip-rule="evenodd"
														/>
													</svg>
												</div>
											{:else}
												<div
													class="w-6 h-6 border-2 border-gray-300 rounded-full group-hover:border-blue-400 transition-colors"
												></div>
											{/if}
										</div>
										<div class="flex-1">
											<h3
												class="font-semibold text-gray-900 group-hover:text-blue-900 transition-colors"
											>
												{section.id}.{lessonIndex + 1}
												{lesson.title}
											</h3>
											<p class="text-sm text-gray-600 mt-1">{lesson.description}</p>

											<!-- Topics -->
											<div class="mt-3">
												<h4 class="text-xs font-medium text-gray-500 mb-2">å­¦ç¿’ãƒˆãƒ”ãƒƒã‚¯:</h4>
												<div class="flex flex-wrap gap-1">
													{#each lesson.topics.slice(0, 3) as topic (topic)}
														<span class="text-xs {section.color} px-2 py-1 rounded">{topic}</span>
													{/each}
													{#if lesson.topics.length > 3}
														<span class="text-xs text-gray-500 px-2 py-1"
															>+{lesson.topics.length - 3}å€‹</span
														>
													{/if}
												</div>
											</div>

											<!-- Exercises -->
											{#if lesson.exercises?.length > 0}
												<div class="mt-2">
													<h4 class="text-xs font-medium text-gray-500 mb-1">å®Ÿç¿’:</h4>
													<p class="text-xs text-gray-600">{lesson.exercises.length}å€‹ã®å®Ÿç¿’èª²é¡Œ</p>
												</div>
											{/if}
										</div>
									</div>
									<div class="flex-shrink-0 ml-4 text-right">
										<div class="text-sm text-gray-500">{lesson.duration}</div>
										<svg
											class="w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors mt-1"
											fill="none"
											stroke="currentColor"
											viewBox="0 0 24 24"
										>
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="2"
												d="M9 5l7 7-7 7"
											/>
										</svg>
									</div>
								</div>
							</a>
						{/each}
					</div>
				</div>
			</div>
		{/each}
	</div>

	<!-- Next Phase Preview -->
	<div
		class="mt-12 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6"
	>
		<h3 class="text-lg font-semibold text-gray-900 mb-3">ğŸš€ æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚º</h3>
		<div class="flex items-center justify-between">
			<div>
				<h4 class="font-semibold text-gray-900">Phase 3: ãƒ†ã‚¹ãƒˆãƒ»è©•ä¾¡</h4>
				<p class="text-sm text-gray-600">WebSocketã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªä¿è¨¼ã¨ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰</p>
			</div>
			<a
				href="/phase3"
				class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"
			>
				Phase 3 ã¸ â†’
			</a>
		</div>
	</div>

	<!-- Docker Setup Guide -->
	<div class="mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6">
		<h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ³ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3>
		<div class="grid md:grid-cols-2 gap-6">
			<div>
				<h4 class="font-medium text-gray-900 mb-2">å¿…è¦ãªç’°å¢ƒ</h4>
				<ul class="text-sm text-gray-600 space-y-1">
					<li>â€¢ Docker & Docker Compose</li>
					<li>â€¢ Node.js 18+ & npm</li>
					<li>â€¢ Git</li>
					<li>â€¢ VSCodeï¼ˆæ¨å¥¨ï¼‰</li>
				</ul>
			</div>
			<div>
				<h4 class="font-medium text-gray-900 mb-2">ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</h4>
				<div class="bg-gray-800 text-green-400 p-3 rounded font-mono text-sm">
					<div>cd ../websocket-learning-apps</div>
					<div>docker-compose up -d</div>
				</div>
			</div>
		</div>
	</div>
</div>
