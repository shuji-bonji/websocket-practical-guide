---
title: 'å…±åŒç·¨é›†ã‚·ã‚¹ãƒ†ãƒ è©³ç´°'
description: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡æ›¸ç·¨é›†ã€ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰ã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®WebSocketã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£'
---

<script>
  import Mermaid from '$lib/components/Mermaid.svelte';
  import UseCaseExample from '$lib/components/UseCaseExample.svelte';
  import Card from '$lib/components/common/Card.svelte';
  import Section from '$lib/components/common/Section.svelte';
  
  const otCode = `// æ“ä½œå¤‰æ› (OT) å®Ÿè£…
class OperationTransform {
  transform(op1, op2) {
    // æ“ä½œã®ç¨®é¡ã«å¿œã˜ãŸå¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
    if (op1.type === 'insert' && op2.type === 'insert') {
      return this.transformInsertInsert(op1, op2);
    }
    if (op1.type === 'insert' && op2.type === 'delete') {
      return this.transformInsertDelete(op1, op2);
    }
    if (op1.type === 'delete' && op2.type === 'insert') {
      return this.transformDeleteInsert(op1, op2);
    }
    if (op1.type === 'delete' && op2.type === 'delete') {
      return this.transformDeleteDelete(op1, op2);
    }
  }
  
  transformInsertInsert(op1, op2) {
    if (op1.position <= op2.position) {
      return [op1, { ...op2, position: op2.position + op1.length }];
    } else {
      return [{ ...op1, position: op1.position + op2.length }, op2];
    }
  }
  
  transformInsertDelete(op1, op2) {
    if (op1.position <= op2.position) {
      return [op1, { ...op2, position: op2.position + op1.length }];
    } else if (op1.position >= op2.position + op2.length) {
      return [{ ...op1, position: op1.position - op2.length }, op2];
    } else {
      // å‰Šé™¤ç¯„å›²å†…ã¸ã®æŒ¿å…¥
      return [op1, { ...op2, length: op2.length + op1.length }];
    }
  }
  
  // ã‚µãƒ¼ãƒãƒ¼å´ã®å®Ÿè£…
  async handleOperation(clientId, operation) {
    const transformedOp = await this.transformAgainstHistory(operation);
    
    // å±¥æ­´ã«è¿½åŠ 
    this.operationHistory.push({
      id: generateId(),
      clientId,
      operation: transformedOp,
      timestamp: Date.now()
    });
    
    // ä»–ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é…ä¿¡
    this.broadcastToOthers(clientId, transformedOp);
  }
}`;

  const crdtCode = `// CRDT (Yjs) å®Ÿè£…ä¾‹
class YjsDocument {
  constructor() {
    this.doc = new Y.Doc();
    this.text = this.doc.getText('content');
    this.awareness = new Awareness(this.doc);
    this.setupWebSocketProvider();
  }
  
  setupWebSocketProvider() {
    this.provider = new WebsocketProvider(
      'ws://localhost:1234', 
      'document-room', 
      this.doc
    );
    
    // æ¥ç¶šçŠ¶æ…‹ã®ç›£è¦–
    this.provider.on('status', event => {
      console.log(event.status); // connected/disconnected
    });
    
    // åŒæœŸã‚¤ãƒ™ãƒ³ãƒˆ
    this.provider.on('sync', isSynced => {
      if (isSynced) {
        console.log('Document synced with server');
      }
    });
  }
  
  // ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œ
  insert(index, content) {
    this.text.insert(index, content);
    // è‡ªå‹•çš„ã«ä»–ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«åŒæœŸ
  }
  
  delete(index, length) {
    this.text.delete(index, length);
  }
  
  // ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®å…±æœ‰
  updateCursorPosition(position) {
    this.awareness.setLocalStateField('cursor', {
      position,
      color: this.userColor,
      name: this.userName
    });
  }
  
  // ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚«ãƒ¼ã‚½ãƒ«ç›£è¦–
  watchCursors(callback) {
    this.awareness.on('change', changes => {
      changes.added.forEach(clientId => {
        const state = this.awareness.getStates().get(clientId);
        callback('added', clientId, state?.cursor);
      });
      
      changes.updated.forEach(clientId => {
        const state = this.awareness.getStates().get(clientId);
        callback('updated', clientId, state?.cursor);
      });
      
      changes.removed.forEach(clientId => {
        callback('removed', clientId, null);
      });
    });
  }
}`;

  const drawingCode = `// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»æœ€é©åŒ–
class OptimizedDrawing {
  constructor() {
    this.strokeBuffer = [];
    this.throttleMs = 16; // 60fps
    this.compressionRatio = 0.5;
    this.setupThrottling();
  }
  
  setupThrottling() {
    setInterval(() => {
      if (this.strokeBuffer.length > 0) {
        this.sendBatchedStrokes();
        this.strokeBuffer = [];
      }
    }, this.throttleMs);
  }
  
  addPoint(x, y, pressure = 1.0) {
    this.strokeBuffer.push({ x, y, pressure, timestamp: Date.now() });
    this.renderLocally(x, y, pressure); // å³åº§ã«ãƒ­ãƒ¼ã‚«ãƒ«æç”»
  }
  
  sendBatchedStrokes() {
    const compressed = this.compressStrokes(this.strokeBuffer);
    
    this.websocket.send(JSON.stringify({
      type: 'stroke_update',
      strokes: compressed,
      metadata: {
        tool: this.currentTool,
        color: this.currentColor,
        width: this.currentWidth
      }
    }));
  }
  
  compressStrokes(strokes) {
    // Douglas-Peucker ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ç‚¹ã‚’å‰Šæ¸›
    return this.douglasPeucker(strokes, this.compressionRatio);
  }
  
  douglasPeucker(points, epsilon) {
    if (points.length <= 2) return points;
    
    // æœ€ã‚‚é ã„ç‚¹ã‚’è¦‹ã¤ã‘ã‚‹
    let maxDistance = 0;
    let maxIndex = 0;
    
    for (let i = 1; i < points.length - 1; i++) {
      const distance = this.perpendicularDistance(
        points[i], points[0], points[points.length - 1]
      );
      if (distance > maxDistance) {
        maxDistance = distance;
        maxIndex = i;
      }
    }
    
    // é–¾å€¤ä»¥ä¸‹ãªã‚‰ä¸­é–“ç‚¹ã‚’å‰Šé™¤
    if (maxDistance <= epsilon) {
      return [points[0], points[points.length - 1]];
    }
    
    // å†å¸°çš„ã«å‡¦ç†
    const left = this.douglasPeucker(points.slice(0, maxIndex + 1), epsilon);
    const right = this.douglasPeucker(points.slice(maxIndex), epsilon);
    
    return left.slice(0, -1).concat(right);
  }
}`;

  const codeReviewCode = `// ã‚³ãƒ¼ãƒ‰å…±åŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
class CodeReviewSystem {
  constructor(documentId, userId) {
    this.documentId = documentId;
    this.userId = userId;
    this.websocket = null;
    this.comments = new Map();
    this.highlights = new Map();
    this.connect();
  }
  
  connect() {
    this.websocket = new WebSocket('ws://localhost:8080/review');
    
    this.websocket.onmessage = (event) => {
      const message = JSON.parse(event.data);
      this.handleMessage(message);
    };
  }
  
  // ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
  addComment(lineNumber, text, codeRange) {
    const comment = {
      id: generateId(),
      userId: this.userId,
      lineNumber,
      text,
      codeRange,
      timestamp: Date.now(),
      resolved: false
    };
    
    this.websocket.send(JSON.stringify({
      type: 'add_comment',
      comment
    }));
  }
  
  // ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ
  highlightCode(startLine, endLine, type) {
    const highlight = {
      id: generateId(),
      userId: this.userId,
      startLine,
      endLine,
      type, // 'suggestion', 'issue', 'question'
      timestamp: Date.now()
    };
    
    this.websocket.send(JSON.stringify({
      type: 'add_highlight',
      highlight
    }));
  }
  
  // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ¼ãƒ‰ç·¨é›†ææ¡ˆ
  suggestEdit(lineNumber, originalCode, suggestedCode) {
    const suggestion = {
      id: generateId(),
      userId: this.userId,
      lineNumber,
      originalCode,
      suggestedCode,
      diff: this.createDiff(originalCode, suggestedCode),
      timestamp: Date.now()
    };
    
    this.websocket.send(JSON.stringify({
      type: 'suggest_edit',
      suggestion
    }));
  }
  
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  handleMessage(message) {
    switch (message.type) {
      case 'comment_added':
        this.comments.set(message.comment.id, message.comment);
        this.renderComment(message.comment);
        break;
        
      case 'highlight_added':
        this.highlights.set(message.highlight.id, message.highlight);
        this.renderHighlight(message.highlight);
        break;
        
      case 'edit_suggested':
        this.showSuggestion(message.suggestion);
        break;
        
      case 'user_cursor':
        this.updateUserCursor(message.userId, message.position);
        break;
    }
  }
  
  // ã‚¹ãƒ¬ãƒƒãƒ‰åŒ–ã•ã‚ŒãŸãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³
  replyToComment(commentId, text) {
    const reply = {
      id: generateId(),
      parentId: commentId,
      userId: this.userId,
      text,
      timestamp: Date.now()
    };
    
    this.websocket.send(JSON.stringify({
      type: 'reply_comment',
      reply
    }));
  }
}`;
</script>

<Section title="ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡æ›¸ç·¨é›†" icon="concept">

<Card title="Operational Transformation (OT) ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" icon="info" accentColor="blue">

OTã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€åŒæ™‚ç·¨é›†æ™‚ã®ç«¶åˆã‚’è§£æ±ºã™ã‚‹ä¸­æ ¸æŠ€è¡“ã§ã™ã€‚ä»¥ä¸‹ã®è¦ç´ ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚

- **æ“ä½œå¤‰æ›ã‚¨ãƒ³ã‚¸ãƒ³**: ç«¶åˆã™ã‚‹æ“ä½œã‚’å¤‰æ›ã—ã¦ä¸€è²«æ€§ã‚’ä¿ã¤
- **æ“ä½œå±¥æ­´ç®¡ç†**: ã™ã¹ã¦ã®æ“ä½œã‚’æ™‚ç³»åˆ—ã§è¨˜éŒ²
- **çŠ¶æ…‹åŒæœŸ**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã®æ–‡æ›¸çŠ¶æ…‹ã‚’åŒæœŸ
- **ç«¶åˆè§£æ±º**: åŒæ™‚æ“ä½œã®è‡ªå‹•èª¿æ•´
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: æ–‡æ›¸ã®å±¥æ­´ã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½

</Card>

<Mermaid chart={`
graph TB
    subgraph "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´"
        A[ğŸ‘¤ ç·¨é›†è€…A] --> A1[ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿]
        B[ğŸ‘¤ ç·¨é›†è€…B] --> B1[ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿]
        C[ğŸ‘¤ ç·¨é›†è€…C] --> C1[ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿]
    end
    
    A1 -->|æ“ä½œé€ä¿¡| OT[ğŸ”„ OTã‚µãƒ¼ãƒãƒ¼]
    B1 -->|æ“ä½œé€ä¿¡| OT
    C1 -->|æ“ä½œé€ä¿¡| OT
    
    subgraph "ã‚µãƒ¼ãƒãƒ¼å´å‡¦ç†"
        OT --> TR[ğŸ”€ æ“ä½œå¤‰æ›ã‚¨ãƒ³ã‚¸ãƒ³]
        TR --> ST[ğŸ“Š çŠ¶æ…‹ç®¡ç†]
        ST --> HB[ğŸ“š å±¥æ­´ãƒãƒƒãƒ•ã‚¡]
        TR --> CF[âš¡ ç«¶åˆè§£æ±º]
    end
    
    OT -->|å¤‰æ›æ¸ˆã¿æ“ä½œ| A1
    OT -->|å¤‰æ›æ¸ˆã¿æ“ä½œ| B1
    OT -->|å¤‰æ›æ¸ˆã¿æ“ä½œ| C1
    
    subgraph "æ°¸ç¶šåŒ–"
        ST --> DB[ğŸ’¾ æ–‡æ›¸ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹]
        HB --> HS[ğŸ“œ å±¥æ­´ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸]
    end
    
    style OT fill:#f3e5f5
    style TR fill:#e8f5e8
    style CF fill:#fff3e0
    style ST fill:#e3f2fd
`} />

<Card title="æ“ä½œå¤‰æ›ã®è©³ç´°ãƒ•ãƒ­ãƒ¼" icon="info" accentColor="green">

æ“ä½œå¤‰æ›ã«ã‚ˆã‚Šã€è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŒæ™‚ç·¨é›†ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

</Card>

<Mermaid chart={`
sequenceDiagram
    participant A as ç·¨é›†è€…A
    participant S as OTã‚µãƒ¼ãƒãƒ¼
    participant B as ç·¨é›†è€…B
    
    Note over A,B: åˆæœŸçŠ¶æ…‹: "Hello"
    
    A->>S: Insert(5, " World") -> "Hello World"
    B->>S: Insert(0, "Hi ") -> "Hi Hello"
    
    S->>S: ç«¶åˆæ¤œçŸ¥ãƒ»æ“ä½œå¤‰æ›
    Note over S: Transform: Insert(5, " World") vs Insert(0, "Hi ")
    Note over S: çµæœ: Insert(8, " World") (ä½ç½®èª¿æ•´)
    
    S->>A: Apply: Insert(0, "Hi ")
    S->>B: Apply: Insert(8, " World")
    
    Note over A,B: æœ€çµ‚çŠ¶æ…‹: "Hi Hello World"
    
    A->>A: ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹æ›´æ–°
    B->>B: ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹æ›´æ–°
`} />

</Section>

<Section title="CRDT ã‚·ã‚¹ãƒ†ãƒ " icon="concept">

<Card title="CRDTãƒ™ãƒ¼ã‚¹ã®åˆ†æ•£ç·¨é›†" icon="info" accentColor="purple">

CRDTã¯ç«¶åˆã®ãªã„åˆ†æ•£ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã€è‡ªå‹•çš„ã«ãƒãƒ¼ã‚¸å¯èƒ½ãªç·¨é›†ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

</Card>

<Mermaid chart={`
graph LR
    subgraph "ç·¨é›†è€…ãƒãƒ¼ãƒ‰"
        A[ğŸ‘¤ ãƒãƒ¼ãƒ‰A] --> A1[ğŸ“„ CRDTçŠ¶æ…‹A]
        B[ğŸ‘¤ ãƒãƒ¼ãƒ‰B] --> B1[ğŸ“„ CRDTçŠ¶æ…‹B]
        C[ğŸ‘¤ ãƒãƒ¼ãƒ‰C] --> C1[ğŸ“„ CRDTçŠ¶æ…‹C]
    end
    
    A1 <-->|åŒæœŸ| B1
    B1 <-->|åŒæœŸ| C1
    A1 <-->|åŒæœŸ| C1
    
    subgraph "CRDTæ“ä½œ"
        A1 --> OP1[ğŸ”§ æŒ¿å…¥æ“ä½œ]
        B1 --> OP2[ğŸ”§ å‰Šé™¤æ“ä½œ]
        C1 --> OP3[ğŸ”§ æ›´æ–°æ“ä½œ]
    end
    
    subgraph "è‡ªå‹•ãƒãƒ¼ã‚¸"
        OP1 --> M[ğŸ”„ è‡ªå‹•ãƒãƒ¼ã‚¸]
        OP2 --> M
        OP3 --> M
        M --> CON[âœ… åæŸçŠ¶æ…‹]
    end
    
    style A1 fill:#e3f2fd
    style B1 fill:#e8f5e8
    style C1 fill:#fff3e0
    style M fill:#f3e5f5
    style CON fill:#e1f5fe
`} />

</Section>

<Section title="ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰" icon="concept" id="whiteboard">

<Card title="æç”»ãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°" icon="info" accentColor="indigo">

ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ä½é…å»¶ã§ã®æç”»åŒæœŸã‚’å®Ÿç¾ã—ã¾ã™ã€‚

</Card>

<Mermaid chart={`
graph TB
    subgraph "å…¥åŠ›å±¤"
        M[ğŸ–±ï¸ ãƒã‚¦ã‚¹/ã‚¿ãƒƒãƒ] --> C[ğŸ“ åº§æ¨™å–å¾—]
        C --> S[âœï¸ ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ç”Ÿæˆ]
    end
    
    subgraph "å‡¦ç†å±¤"
        S --> SC[ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒ«è¨ˆç®—]
        SC --> OPT[âš¡ æœ€é©åŒ–å‡¦ç†]
        OPT --> COMP[ğŸ—œï¸ åœ§ç¸®]
    end
    
    subgraph "é…ä¿¡å±¤"
        COMP --> WS[WebSocketã‚µãƒ¼ãƒãƒ¼]
        WS --> BR[ğŸ“¡ ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ]
    end
    
    subgraph "ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å±¤"
        BR --> R1[ğŸ–¼ï¸ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼1]
        BR --> R2[ğŸ–¼ï¸ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼2]
        BR --> R3[ğŸ–¼ï¸ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼N]
    end
    
    subgraph "åŒæœŸç®¡ç†"
        WS --> SYNC[ğŸ”„ åŒæœŸã‚¨ãƒ³ã‚¸ãƒ³]
        SYNC --> VS[ğŸ“ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†]
        VS --> HIST[ğŸ“š å±¥æ­´ç®¡ç†]
    end
    
    style WS fill:#f3e5f5
    style SYNC fill:#e8f5e8
    style OPT fill:#fff3e0
`} />

<Card title="æç”»ã‚¤ãƒ™ãƒ³ãƒˆã®æœ€é©åŒ–" icon="success" accentColor="green">

æç”»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–ã™ã‚‹ãŸã‚ã®æ‰‹æ³•ã€‚

</Card>

<Mermaid chart={`
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant C as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    participant S as WebSocketã‚µãƒ¼ãƒãƒ¼
    participant O as ä»–ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    
    U->>C: æç”»é–‹å§‹
    C->>C: ãƒ­ãƒ¼ã‚«ãƒ«æç”»
    C->>S: ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯é–‹å§‹ã‚¤ãƒ™ãƒ³ãƒˆ
    
    loop æç”»ä¸­ (é«˜é »åº¦)
        U->>C: åº§æ¨™æ›´æ–°
        C->>C: ãƒ­ãƒ¼ã‚«ãƒ«æç”»ç¶™ç¶š
        C->>C: ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚° (16msé–“éš”)
    end
    
    C->>S: ãƒãƒƒãƒ•ã‚¡æ¸ˆã¿åº§æ¨™ç¾¤
    S->>O: æœ€é©åŒ–æ¸ˆã¿ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯
    O->>O: è£œé–“ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    
    U->>C: æç”»çµ‚äº†
    C->>S: ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
    S->>O: æœ€çµ‚ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯
    
    Note over C,O: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”» + æœ€é©åŒ–é…ä¿¡
`} />

</Section>

<Section title="ã‚³ãƒ¼ãƒ‰å…±åŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ " icon="concept">

<Card title="Live Code Review ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" icon="info" accentColor="amber">

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆè¦ç´ ã€‚

</Card>

<Mermaid chart={`
graph TD
    subgraph "é–‹ç™ºè€…"
        D1[ğŸ‘¨â€ğŸ’» é–‹ç™ºè€…1] --> E1[ğŸ’» ã‚¨ãƒ‡ã‚£ã‚¿1]
        D2[ğŸ‘©â€ğŸ’» é–‹ç™ºè€…2] --> E2[ğŸ’» ã‚¨ãƒ‡ã‚£ã‚¿2]
        D3[ğŸ‘¨â€ğŸ’» ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼] --> E3[ğŸ’» ã‚¨ãƒ‡ã‚£ã‚¿3]
    end
    
    E1 --> WS[WebSocketã‚µãƒ¼ãƒãƒ¼]
    E2 --> WS
    E3 --> WS
    
    subgraph "ã‚³ãƒ¼ãƒ‰ç®¡ç†"
        WS --> CM[ğŸ“ ã‚³ãƒ¼ãƒ‰ç®¡ç†]
        CM --> DI[ğŸ” å·®åˆ†è¨ˆç®—]
        DI --> SY[ğŸ”„ ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹è§£æ]
        SY --> AN[ğŸ“Š é™çš„è§£æ]
    end
    
    subgraph "ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½"
        WS --> RC[ğŸ’¬ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆ]
        RC --> TH[ğŸ§µ ã‚¹ãƒ¬ãƒƒãƒ‰ç®¡ç†]
        TH --> NO[ğŸ”” é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ]
    end
    
    subgraph "çµ±åˆæ©Ÿèƒ½"
        AN --> CI[ğŸ”§ CI/CDé€£æº]
        CI --> TEST[ğŸ§ª è‡ªå‹•ãƒ†ã‚¹ãƒˆ]
        TEST --> REP[ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ]
    end
    
    WS --> E1
    WS --> E2
    WS --> E3
    
    style WS fill:#f3e5f5
    style CM fill:#e8f5e8
    style RC fill:#fff3e0
    style AN fill:#e3f2fd
`} />

</Section>

<Section title="ã‚«ãƒ¼ã‚½ãƒ«ãƒ»é¸æŠç¯„å›²ã®åŒæœŸ" icon="flow">

<Card title="ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®è¡¨ç¤º" icon="info" accentColor="teal">

å…±åŒç·¨é›†ã«ãŠã‘ã‚‹è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å®Ÿè£…ã€‚

</Card>

<Mermaid chart={`
graph LR
    subgraph "ãƒ¦ãƒ¼ã‚¶ãƒ¼A"
        A[ğŸ‘¤ ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®] --> A1[ğŸ“ åº§æ¨™è¨ˆç®—]
        A1 --> A2[ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨]
    end
    
    A2 --> WS[WebSocketã‚µãƒ¼ãƒãƒ¼]
    
    subgraph "ä½ç½®ç®¡ç†"
        WS --> PM[ğŸ“ ä½ç½®ãƒãƒƒãƒ”ãƒ³ã‚°]
        PM --> CM[ğŸ”„ åº§æ¨™å¤‰æ›]
        CM --> UM[ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
    end
    
    subgraph "ãƒ¦ãƒ¼ã‚¶ãƒ¼B"
        WS --> B1[ğŸ“ åº§æ¨™å¾©å…ƒ]
        B1 --> B2[ğŸ‘» ã‚´ãƒ¼ã‚¹ãƒˆã‚«ãƒ¼ã‚½ãƒ«]
        B2 --> B[ğŸ‘¤ è¦–è¦šè¡¨ç¤º]
    end
    
    subgraph "ãƒ¦ãƒ¼ã‚¶ãƒ¼C"
        WS --> C1[ğŸ“ åº§æ¨™å¾©å…ƒ]
        C1 --> C2[ğŸ‘» ã‚´ãƒ¼ã‚¹ãƒˆã‚«ãƒ¼ã‚½ãƒ«]
        C2 --> C[ğŸ‘¤ è¦–è¦šè¡¨ç¤º]
    end
    
    style WS fill:#f3e5f5
    style PM fill:#e8f5e8
    style A2 fill:#e3f2fd
    style B2 fill:#fff3e0
    style C2 fill:#fce4ec
`} />

</Section>

<Section title="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æˆ¦ç•¥" icon="tips">

<Card title="ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ãƒ»ãƒãƒƒãƒãƒ³ã‚°" icon="warning" accentColor="orange">

å¤§è¦æ¨¡ãªå…±åŒç·¨é›†ã‚’æ”¯ãˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æŠ€è¡“ã€‚

</Card>

<Mermaid chart={`
graph TB
    subgraph "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæœ€é©åŒ–"
        I[âŒ¨ï¸ å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ] --> B[ğŸ“¦ ãƒãƒƒãƒãƒ³ã‚°]
        B --> C[ğŸ—œï¸ åœ§ç¸®]
        C --> D[ğŸ”„ å·®åˆ†è¨ˆç®—]
    end
    
    subgraph "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æœ€é©åŒ–"
        D --> RT[â±ï¸ ãƒ¬ãƒ¼ãƒˆåˆ¶é™]
        RT --> PR[ğŸ“Š å„ªå…ˆåº¦åˆ¤å®š]
        PR --> WS[WebSocketé€ä¿¡]
    end
    
    subgraph "ã‚µãƒ¼ãƒãƒ¼æœ€é©åŒ–"
        WS --> DC[ğŸ” é‡è¤‡é™¤å»]
        DC --> ME[ğŸ”„ ãƒãƒ¼ã‚¸å‡¦ç†]
        ME --> BC[ğŸ“¡ ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ]
    end
    
    subgraph "å—ä¿¡å´æœ€é©åŒ–"
        BC --> IN[ğŸ“¥ è£œé–“å‡¦ç†]
        IN --> AN[ğŸ¬ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³]
        AN --> RE[ğŸ–¼ï¸ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°]
    end
    
    style B fill:#e3f2fd
    style C fill:#e8f5e8
    style RT fill:#fff3e0
    style ME fill:#f3e5f5
    style IN fill:#fce4ec
`} />

</Section>

<Section title="å®Ÿè£…ä¾‹" icon="code">

<UseCaseExample
  title="æ“ä½œå¤‰æ› (OT) å®Ÿè£…"
  category="Operational Transformation"
  description="åŒæ™‚ç·¨é›†æ™‚ã®ç«¶åˆã‚’è§£æ±ºã™ã‚‹Operational Transformationã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…ã§ã™ã€‚æŒ¿å…¥ãƒ»å‰Šé™¤æ“ä½œã®å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã¿ã¾ã™ã€‚"
  code={otCode}
  language="javascript"
  complexity="advanced"
  features={[
    "æŒ¿å…¥ãƒ»å‰Šé™¤æ“ä½œã®å¤‰æ›",
    "æ“ä½œå±¥æ­´ç®¡ç†",
    "ç«¶åˆè§£æ±ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ",
    "ã‚µãƒ¼ãƒãƒ¼å´ã®åŒæœŸå‡¦ç†",
    "ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆé…ä¿¡",
    "ä¸€è²«æ€§ä¿è¨¼"
  ]}
/>

<UseCaseExample
  title="CRDT (Yjs) å®Ÿè£…"
  category="CRDT Implementation"
  description="Yjsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸCRDTãƒ™ãƒ¼ã‚¹ã®å…±åŒç·¨é›†å®Ÿè£…ã§ã™ã€‚è‡ªå‹•ãƒãƒ¼ã‚¸ã¨ç«¶åˆè§£æ±ºã‚’å®Ÿç¾ã—ã¾ã™ã€‚"
  code={crdtCode}
  language="javascript"
  complexity="intermediate"
  features={[
    "è‡ªå‹•åŒæœŸæ©Ÿèƒ½",
    "ç«¶åˆã®ãªã„ç·¨é›†",
    "ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®å…±æœ‰",
    "Awareness API",
    "æ¥ç¶šçŠ¶æ…‹ç®¡ç†",
    "ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ"
  ]}
/>

<UseCaseExample
  title="ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»æœ€é©åŒ–"
  category="Drawing Optimization"
  description="ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰æ©Ÿèƒ½ã®ãŸã‚ã®æç”»ãƒ‡ãƒ¼ã‚¿æœ€é©åŒ–å®Ÿè£…ã§ã™ã€‚ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯åœ§ç¸®ã¨ãƒãƒƒãƒãƒ³ã‚°å‡¦ç†ã‚’å«ã¿ã¾ã™ã€‚"
  code={drawingCode}
  language="javascript"
  complexity="advanced"
  features={[
    "60fpsã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°",
    "Douglas-Peuckerã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ",
    "ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯åœ§ç¸®",
    "ãƒãƒƒãƒé€ä¿¡",
    "ãƒ­ãƒ¼ã‚«ãƒ«å³æ™‚æç”»",
    "å¸¯åŸŸå¹…æœ€é©åŒ–"
  ]}
/>

<UseCaseExample
  title="ã‚³ãƒ¼ãƒ‰å…±åŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ "
  category="Code Review System"
  description="ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã®å®Ÿè£…ã§ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒã‚¤ãƒ©ã‚¤ãƒˆã€ç·¨é›†ææ¡ˆæ©Ÿèƒ½ã‚’å«ã¿ã¾ã™ã€‚"
  code={codeReviewCode}
  language="javascript"
  complexity="advanced"
  features={[
    "ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ",
    "ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ",
    "ç·¨é›†ææ¡ˆã¨diffè¡¨ç¤º",
    "ã‚¹ãƒ¬ãƒƒãƒ‰åŒ–ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³",
    "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚«ãƒ¼ã‚½ãƒ«åŒæœŸ",
    "ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†"
  ]}
/>

</Section>

<Section title="ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹" icon="tips">

<Card title="å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ" icon="info" accentColor="blue">

### 1. æ“ä½œå¤‰æ› (OT) å®Ÿè£…
- **å¤‰æ›ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®é¸æŠ**: OT vs CRDT ã®é©åˆ‡ãªé¸æŠ
- **å±¥æ­´ç®¡ç†**: æ“ä½œå±¥æ­´ã®åŠ¹ç‡çš„ãªä¿å­˜ã¨æ¤œç´¢
- **åŒæœŸãƒ—ãƒ­ãƒˆã‚³ãƒ«**: ä¿¡é ¼æ€§ã®é«˜ã„åŒæœŸãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

### 2. CRDT å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ
- **ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®é¸æŠ**: ç”¨é€”ã«å¿œã˜ãŸCRDTã‚¿ã‚¤ãƒ—
- **ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: ä¸è¦ãªå±¥æ­´ã®å‰Šé™¤
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚„ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

### 3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»æœ€é©åŒ–
- **ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°æˆ¦ç•¥**: é©åˆ‡ãªãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º
- **åœ§ç¸®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: æç”»å“è³ªã¨åœ§ç¸®ç‡ã®ãƒãƒ©ãƒ³ã‚¹
- **è£œé–“å‡¦ç†**: ã‚¹ãƒ ãƒ¼ã‚ºãªæç”»å†ç¾

### 4. ç«¶åˆè§£æ±ºæˆ¦ç•¥
- **Last Writer Wins**: æœ€å¾Œã®æ›¸ãè¾¼ã¿ãŒå„ªå…ˆ
- **Timestamped Operations**: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹ã®é †åºä»˜ã‘
- **Consensus-based**: è¤‡æ•°ãƒãƒ¼ãƒ‰ã§ã®åˆæ„å½¢æˆ
- **User Priority**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã«åŸºã¥ãå„ªå…ˆåº¦

### 5. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …
- **ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå˜ä½ã§ã®åˆ†æ•£
- **ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: èª­ã¿å–ã‚Šæ€§èƒ½ã®å‘ä¸Š
- **ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°**: é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®é«˜é€ŸåŒ–

ã“ã®è©³ç´°ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šã€ã‚¹ãƒ ãƒ¼ã‚ºã§é«˜æ€§èƒ½ãªå…±åŒç·¨é›†ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

</Card>

</Section>