---
title: "HTTP/1.1ã‹ã‚‰HTTP/3ã¾ã§ã®WebSocketå¯¾å¿œ"
description: "HTTPã®å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãŠã‘ã‚‹WebSocketå¯¾å¿œçŠ¶æ³ã¨ç‰¹å¾´ã‚’æ¯”è¼ƒã—ã€æœ€é©ãªå®Ÿè£…æˆ¦ç•¥ã‚’å­¦ç¿’ã—ã¾ã™"
duration: 45
difficulty: "intermediate"
phase: 1
lesson: "2.3"
---

<script>
	import LessonLayout from '$lib/components/common/LessonLayout.svelte';
	import Section from '$lib/components/common/Section.svelte';
	import Card from '$lib/components/common/Card.svelte';
	import Mermaid from '$lib/components/Mermaid.svelte';
</script>

<LessonLayout
	lessonId="phase1-network-tech-http-versions"
	title="HTTP/1.1ã‹ã‚‰HTTP/3ã¾ã§ã®WebSocketå¯¾å¿œ"
	duration="45åˆ†"
	difficulty="intermediate"
	prerequisites={['HTTPåŸºç¤', 'OSIå‚ç…§ãƒ¢ãƒ‡ãƒ«', 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡ã®åŸºæœ¬æ¦‚å¿µ']}
	sectionTitle="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æŠ€è¡“åŸºç¤"
	nextLessonId="phase1-network-tech-tcp-websocket"
	nextLessonTitle="TCPã¨WebSocketã®é–¢ä¿‚"
	nextLessonPath="/phase1/network-tech/tcp-websocket"
	learningObjectives={[
		'HTTPã®å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãŠã‘ã‚‹WebSocketå¯¾å¿œçŠ¶æ³ã‚’ç†è§£',
		'HTTP/2ã§ã®åŒæ–¹å‘é€šä¿¡ã¨åˆ¶é™äº‹é …ã‚’æŠŠæ¡',
		'HTTP/3ï¼ˆQUICï¼‰ã¨WebSocketã®é–¢ä¿‚ã‚’ç†è§£',
		'å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®æœ€é©ãªå®Ÿè£…æˆ¦ç•¥ã‚’ç¿’å¾—'
	]}
>

<Section title="å­¦ç¿’å†…å®¹" icon="ğŸ“š">
	<Card title="ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§å­¦ã¶ã“ã¨" icon="ğŸ“‹" accentColor="blue">
		<p>HTTPã®é€²åŒ–ã¨WebSocketã®å¯¾å¿œçŠ¶æ³ã‚’ç†è§£ã—ã€å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®æœ€é©ãªå®Ÿè£…æˆ¦ç•¥ã‚’å­¦ç¿’ã—ã¾ã™ã€‚</p>
		<ul>
			<li><strong>HTTP/1.1ã§ã®WebSocketå®Ÿè£…</strong>ã¨ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ¡ã‚«ãƒ‹ã‚ºãƒ </li>
			<li><strong>HTTP/2ã®åŒæ–¹å‘é€šä¿¡</strong>ã¨WebSocketã¨ã®æ¯”è¼ƒ</li>
			<li><strong>HTTP/3ï¼ˆQUICï¼‰</strong>ã§ã®WebSocket over HTTP/3</li>
			<li><strong>å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®æœ€é©ãªé¸æŠè‚¢</strong>ã¨å®Ÿè£…æˆ¦ç•¥</li>
		</ul>
	</Card>
</Section>

<Section title="HTTP/1.1ã¨WebSocket" icon="ğŸ”„">
	<Card title="WebSocketã®åŸºç›¤ãƒ—ãƒ­ãƒˆã‚³ãƒ«" icon="ğŸŒ" accentColor="green">
		<p><strong>HTTP/1.1</strong>ã¯ç¾åœ¨ã®WebSocketã®åŸºç›¤ã¨ãªã‚‹é‡è¦ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚</p>
		
		<h4 class="font-semibold mt-4 mb-2">WebSocketãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯ï¼ˆHTTP/1.1ï¼‰</h4>
		
		<div class="bg-gray-50 p-4 rounded-lg font-mono text-sm">
```http
GET /websocket HTTP/1.1
Host: example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
Sec-WebSocket-Version: 13
```
		</div>
		
		<h4 class="font-semibold mt-4 mb-2">ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹</h4>
		
		<div class="bg-gray-50 p-4 rounded-lg font-mono text-sm">
```http
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
```
		</div>
		
		<div class="mt-4 p-4 bg-green-50 rounded-lg">
			<h5 class="font-medium text-green-800">âœ… HTTP/1.1ã®å„ªä½æ€§</h5>
			<ul class="text-sm text-green-700 mt-2 space-y-1">
				<li>â€¢ å®Œå…¨ãªWebSocketå¯¾å¿œ</li>
				<li>â€¢ æœ€ã‚‚å®‰å®šã—ãŸå®Ÿè£…</li>
				<li>â€¢ å¹…åºƒã„ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆ</li>
				<li>â€¢ è±Šå¯Œãªå®Ÿè£…ä¾‹ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</li>
			</ul>
		</div>
	</Card>
</Section>

<Section title="HTTP/2ã§ã®åŒæ–¹å‘é€šä¿¡" icon="âš¡">
	<Card title="Server Push vs WebSocket" icon="ğŸ”€" accentColor="orange">
		<p><strong>HTTP/2</strong>ã§ã¯æ–°ã—ã„åŒæ–¹å‘é€šä¿¡æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸãŒã€WebSocketã¨ã¯ç•°ãªã‚‹ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚</p>
		
		<div class="grid md:grid-cols-2 gap-6 my-6">
			<div class="bg-orange-50 p-4 rounded-lg">
				<h4 class="font-semibold text-orange-800 mb-2">ğŸ”„ HTTP/2 Server Push</h4>
				<ul class="text-sm text-orange-700 space-y-1">
					<li>â€¢ ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®ä¸€æ–¹å‘</li>
					<li>â€¢ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ‡ãƒ«</li>
					<li>â€¢ ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å¯¾å¿œãŒé™å®šçš„</li>
					<li>â€¢ å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ã§å»ƒæ­¢äºˆå®š</li>
				</ul>
			</div>
			
			<div class="bg-blue-50 p-4 rounded-lg">
				<h4 class="font-semibold text-blue-800 mb-2">ğŸŒ WebSocket over HTTP/2</h4>
				<ul class="text-sm text-blue-700 space-y-1">
					<li>â€¢ çœŸã®åŒæ–¹å‘é€šä¿¡</li>
					<li>â€¢ æ°¸ç¶šçš„æ¥ç¶š</li>
					<li>â€¢ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã«æœ€é©</li>
					<li>â€¢ HTTP/2ä¸Šã§ã®WebSocketã‚µãƒãƒ¼ãƒˆ</li>
				</ul>
			</div>
		</div>
		
		<div class="mt-4 p-4 bg-yellow-50 rounded-lg">
			<h5 class="font-medium text-yellow-800">âš ï¸ æ³¨æ„ç‚¹</h5>
			<p class="text-sm text-yellow-700 mt-2">
				HTTP/2 Server Pushã¯å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ã§å»ƒæ­¢ã•ã‚Œã€WebSocketãŒåŒæ–¹å‘é€šä¿¡ã®æ¨™æº–ã¨ãªã£ã¦ã„ã¾ã™ã€‚
			</p>
		</div>
	</Card>
</Section>

<Section title="HTTP/3ï¼ˆQUICï¼‰ã¨WebSocket" icon="ğŸš€">
	<Card title="æ¬¡ä¸–ä»£ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã®å¯¾å¿œ" icon="ğŸ”®" accentColor="purple">
		<p><strong>HTTP/3</strong>ã¯QUICãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ™ãƒ¼ã‚¹ã®æ–°ã—ã„HTTPãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚</p>
		
		<h4 class="font-semibold mt-4 mb-2">WebSocket over HTTP/3ã®ç‰¹å¾´</h4>
		
		<div class="space-y-3">
			<div class="bg-purple-50 p-4 rounded-lg">
				<h5 class="font-medium text-purple-800">ğŸ”® WebSocket over HTTP/3</h5>
				<ul class="text-sm text-purple-700 mt-2 space-y-1">
					<li>â€¢ QUICã«ã‚ˆã‚‹ä½é…å»¶é€šä¿¡</li>
					<li>â€¢ æ¥ç¶šã®è¿…é€Ÿãªç¢ºç«‹</li>
					<li>â€¢ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡ã‚Šæ›¿ãˆæ™‚ã®è€æ€§</li>
					<li>â€¢ 0-RTTãƒªã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³</li>
				</ul>
			</div>
			
			<div class="bg-blue-50 p-4 rounded-lg">
				<h5 class="font-medium text-blue-800">ğŸŒ WebTransport</h5>
				<ul class="text-sm text-blue-700 mt-2 space-y-1">
					<li>â€¢ HTTP/3ä¸Šã§ã®æ–°ã—ã„åŒæ–¹å‘é€šä¿¡API</li>
					<li>â€¢ Datagramã¨Streamã®ã‚µãƒãƒ¼ãƒˆ</li>
					<li>â€¢ WebSocketã«ä»£ã‚ã‚‹é¸æŠè‚¢</li>
					<li>â€¢ ç¾åœ¨å®Ÿé¨“çš„å®Ÿè£…æ®µéš</li>
				</ul>
			</div>
		</div>
		
		<div class="mt-4 p-4 bg-gray-50 rounded-lg">
			<h5 class="font-medium text-gray-800">ğŸ“Š ç¾åœ¨ã®å¯¾å¿œçŠ¶æ³ï¼ˆ2024å¹´ï¼‰</h5>
			<ul class="text-sm text-gray-700 mt-2 space-y-1">
				<li>â€¢ <strong>WebSocket over HTTP/3</strong>: ä¸€éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè£…ä¸­</li>
				<li>â€¢ <strong>WebTransport</strong>: Chrome/Edgeã§å®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆ</li>
				<li>â€¢ <strong>ã‚µãƒ¼ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ</strong>: ä¸»è¦Webã‚µãƒ¼ãƒãƒ¼ã§å¯¾å¿œé€²è¡Œä¸­</li>
			</ul>
		</div>
	</Card>
</Section>

<Section title="å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®æœ€é©æˆ¦ç•¥" icon="ğŸ¯">
	<Card title="ç¾åœ¨ï¼ˆ2024å¹´ï¼‰ã®æ¨å¥¨å®Ÿè£…" icon="âœ…" accentColor="green">
		<h4 class="font-semibold mb-4">ä¸»æµãªé¸æŠ</h4>
		
<div class="bg-gray-50 p-4 rounded-lg font-mono text-sm">
<pre><code class="language-javascript">// 1. WebSocketï¼ˆHTTP/1.1ãƒ™ãƒ¼ã‚¹ï¼‰- æœ€ã‚‚å®‰å®š
const socket = new WebSocket('wss://api.example.com/ws');

// 2. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥ã®å®Ÿè£…
class RobustWebSocket {
    constructor(url) {
        this.url = url;
        this.connect();
    }
    
    connect() {
        try {
            this.socket = new WebSocket(this.url);
            this.socket.onopen = () => console.log('Connected via WebSocket');
        } catch (error) {
            console.log('WebSocket failed, considering alternatives...');
            this.fallbackToHTTP2();
        }
    }
    
    fallbackToHTTP2() {
        // HTTP/2 Server-Sent Events ã§ã®ä»£æ›¿å®Ÿè£…
        const eventSource = new EventSource('/api/events');
        eventSource.onmessage = (event) => {
            console.log('Received via SSE:', event.data);
        };
    }
}
</code></pre>
</div>
	</Card>
	
	<Card title="å°†æ¥ã¸ã®æº–å‚™" icon="ğŸ”®" accentColor="blue">
		<h4 class="font-semibold mb-4">æ¬¡ä¸–ä»£å¯¾å¿œã®æº–å‚™</h4>
		
<div class="bg-gray-50 p-4 rounded-lg font-mono text-sm">
<pre><code class="language-javascript">// WebTransportå¯¾å¿œã®æº–å‚™ï¼ˆå®Ÿé¨“çš„ï¼‰
if ('WebTransport' in window) {
    const transport = new WebTransport('https://example.com/webtransport');
    await transport.ready;
    
    // Datagram APIä½¿ç”¨ä¾‹
    const writer = transport.datagrams.writable.getWriter();
    await writer.write(new Uint8Array([1, 2, 3, 4]));
} else {
    // WebSocketãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    const socket = new WebSocket('wss://example.com/websocket');
}
</code></pre>
</div>
		
		<div class="mt-4 p-4 bg-blue-50 rounded-lg">
			<h5 class="font-medium text-blue-800">ğŸ”® å°†æ¥ã®å±•æœ›</h5>
			<ul class="text-sm text-blue-700 mt-2 space-y-1">
				<li>â€¢ WebTransportã®æ¨™æº–åŒ–ã¨æ™®åŠ</li>
				<li>â€¢ HTTP/3ã§ã®WebSocketæ€§èƒ½å‘ä¸Š</li>
				<li>â€¢ ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã®æœ€é©åŒ–</li>
				<li>â€¢ Edge Computingã§ã®WebSocketæ´»ç”¨</li>
			</ul>
		</div>
	</Card>
</Section>

<Section title="ã¾ã¨ã‚" icon="ğŸ“Š">
	<Card title="é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ" icon="ğŸ¯" accentColor="indigo">
		<div class="grid md:grid-cols-2 gap-4">
			<div>
				<h4 class="font-semibold text-indigo-800 mb-2">ç¾åœ¨ã®å®Ÿè£…æˆ¦ç•¥</h4>
				<ul class="space-y-1 text-sm text-indigo-700">
					<li>âœ“ HTTP/1.1ãƒ™ãƒ¼ã‚¹ã®WebSocketãŒä¸»æµ</li>
					<li>âœ“ HTTP/2 Server Pushã¯å»ƒæ­¢å‚¾å‘</li>
					<li>âœ“ WebSocketãŒåŒæ–¹å‘é€šä¿¡ã®æ¨™æº–</li>
					<li>âœ“ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥ã®é‡è¦æ€§</li>
				</ul>
			</div>
			<div>
				<h4 class="font-semibold text-indigo-800 mb-2">å°†æ¥ã¸ã®æº–å‚™</h4>
				<ul class="space-y-1 text-sm text-indigo-700">
					<li>âœ“ HTTP/3ã§ã®WebSocketå¯¾å¿œ</li>
					<li>âœ“ WebTransportã®å¯èƒ½æ€§</li>
					<li>âœ“ ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–å¯¾å¿œæˆ¦ç•¥</li>
					<li>âœ“ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</li>
				</ul>
			</div>
		</div>
	</Card>
</Section>

</LessonLayout>